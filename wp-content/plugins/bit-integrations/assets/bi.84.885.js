var w=Object.defineProperty;var y=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var _=(i,s,t)=>s in i?w(i,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[s]=t,h=(i,s)=>{for(var t in s||(s={}))L.call(s,t)&&_(i,t,s[t]);if(y)for(var t of y(s))M.call(s,t)&&_(i,t,s[t]);return i};import{i as R,j as e,L as k}from"./main-165.js";import{j as O,_ as n,k as S,H as T,T as D,o as H}from"./bi.312.95.js";import{r as P,a as $}from"./bi.855.884.js";function E({i,formFields:s,field:t,directIqConf:a,setDirectIqConf:u}){var g,v,N,F;const p=t.required,o=((g=a==null?void 0:a.default)==null?void 0:g.fields)&&Object.values((v=a==null?void 0:a.default)==null?void 0:v.fields).filter(l=>!l.required),j=R(O),{isPro:x}=j,d=l=>{const m=h({},a);m.field_map.splice(l,0,{}),u(m)},c=l=>{const m=h({},a);m.field_map.length>1&&m.field_map.splice(l,1),u(m)},r=(l,m)=>{const b=h({},a);b.field_map[m][l.target.name]=l.target.value,l.target.value==="custom"&&(b.field_map[m].customValue=""),u(b)},V=(l,m)=>{const b=h({},a);b.field_map[m].customValue=l.target.value,u(b)};return e.jsxs("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:t.formField||"",onChange:l=>r(l,i),children:[e.jsx("option",{value:"",children:n("Select Field","bit-integrations")}),e.jsx("optgroup",{label:n("List Fields","bit-integrations"),children:s==null?void 0:s.map(l=>e.jsx("option",{value:l.name,children:l.label},`ff-rm-${l.name}`))}),e.jsx("option",{value:"custom",children:n("Custom...","bit-integrations")}),e.jsx("optgroup",{label:`${n("General Smart Codes","bit-integrations")} ${x?"":`(${n("Pro","bit-integrations")})`}`,children:x&&((N=S)==null?void 0:N.map(l=>e.jsx("option",{value:l.name,children:l.label},`ff-rm-${l.name}`)))})]}),t.formField==="custom"&&e.jsx(T,{onChange:l=>V(l,i),label:n("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:t.customValue,placeholder:n("Custom Value","bit-integrations")}),e.jsxs("select",{className:"btcd-paper-inp",name:"directIqField",value:t.directIqField,onChange:l=>r(l,i),disabled:p,children:[e.jsx("option",{value:"",children:n("Select Field","bit-integrations")}),p?((F=a==null?void 0:a.default)==null?void 0:F.fields)&&Object.values(a.default.fields).map(l=>e.jsx("option",{value:l.fieldValue,children:l.fieldName},`${l.fieldValue}`)):o&&o.map(l=>e.jsx("option",{value:l.fieldValue,children:l.fieldName},`${l.fieldValue}`))]})]}),!p&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>d(i),className:"icn-btn sh-sm ml-2",type:"button",children:"+"}),e.jsx("button",{onClick:()=>c(i),className:"icn-btn sh-sm ml-2",type:"button","aria-label":"btn",children:e.jsx(D,{})})]})]})}function J({formFields:i,directIqConf:s,setDirectIqConf:t,isLoading:a,setIsLoading:u,setSnackbar:p}){var j,x;const o=d=>{const c=d.target.value,r=h({},s);c?r.listId=c:delete r.listId,$(r,t,u,p)};return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:n("List:","bit-integrations")}),e.jsxs("select",{value:s==null?void 0:s.listId,name:"listId",id:"",className:"btcd-paper-inp w-5",onChange:o,children:[e.jsx("option",{value:"",children:n("Select List","bit-integrations")}),((j=s==null?void 0:s.default)==null?void 0:j.directIqLists)&&Object.keys(s.default.directIqLists).map(d=>e.jsx("option",{value:s.default.directIqLists[d].listId,children:s.default.directIqLists[d].listName},`${d+1}`))]}),e.jsx("button",{onClick:()=>P(s,t,u,p),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh DirectIq list"'},type:"button",disabled:a,children:"↻"}),e.jsx("br",{}),e.jsx("br",{}),a&&e.jsx(k,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,translist:"scale(0.7)"}}),e.jsxs("div",{className:"mt-4",children:[e.jsx("b",{className:"wdt-100",children:n("Map Fields","bit-integrations")}),e.jsx("button",{onClick:()=>$(s,t,u,p),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${n("Refresh DirectIq Field","bit-integrations")}'`},type:"button",disabled:a,children:"↻"})]}),((s==null?void 0:s.listId)||((x=s==null?void 0:s.default)==null?void 0:x.fields))&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:n("List Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:n("DirectIq Fields","bit-integrations")})})]}),s.field_map.map((d,c)=>e.jsx(E,{i:c,field:d,directIqConf:s,formFields:i,setDirectIqConf:t},`DirectIq-m-${c+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>H(s.field_map.length,s,t),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{})]})]})}export{J as D};
